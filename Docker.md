# Docker

## 1、环境配置难题

软件开发最大麻烦事之一，就是环境配置。用户计算机的环境各不相同，你不能保证自家的软件能在其他机器上跑起来。

用户需要保证两件事：操作系统设置，各种库和组件安装。

那能不能从根本上解决问题，软件可以带环境安装？也就是安装的时候，把原始环境一摸一样的复制过来。

## 2、虚拟机

虚拟机就是带环境安装的一种方式。它可以在一种操作系统里面运行另外一种操作系统。对于底层系统来说，虚拟机就是一个普通文件，不需要了就删除，对其它部分毫无影响。

但这个方案有几个缺点：

>1、资源占用多：会占用一部分内存和磁盘。哪怕虚拟机里面的应用程序真正使用内存只有1MB，虚拟机任需要几百MB的内存才能运行。
>
>2、冗余步骤多：	虚拟机是完整的操作系统，一些系统级别的步骤，往往无法跳过，如用户登录。
>
>3、启动慢：启动操作系统需要多久，虚拟机就要多久。可能需要等几分钟，应用程序才能真正启动。

## 3、Linux容器

由于虚拟机存在这些缺点：Linux发展出了另一种虚拟化技术：Linux容器（Linux Containers，LXC）。

Linux容器不是模拟一个完整的操作系统，而是对进程进行隔离。或者说，在正常进程的外面套了一个保护层。对于容器里面的进程来说，它接触到的各种资源都是虚拟的，从而实现鱼底层系统的隔离。

由于容器时进程级别的，相比虚拟机有很多优势。

>1、启动快。容器里面的应用，直接就是底层系统的一个进程，而不是虚拟机内部的一个进程。所以，启动容器相当于启动本机的一个进程。而不是启动一个操作系统，速度就快很多。
>
>2、资源占用少。容器只占用需要的资源，不占用那些没用到的资源；虚拟机由于是完整的操作系统，不可避免要占用资源。另外，多个容器可以共享资源，虚拟机都是独占资源。
>
>3、体积小。容器只要包含用到的组件就行，而虚拟机是整个操作系统的打包，所以容器文件比虚拟机文件要小很多。

总之，容器有点像轻量级的虚拟机，能够提供虚拟化的环境，但成本开销要小得多。

## 4、Docker

Docker属于Linux容器的一种封装，提供简单易用的容器使用接口。

Docker将应用程序和该程序的依赖，打包在一个文件里面。运行这个文件，就会生成一个虚拟容器。程序在这个虚拟容器运行，就好像在真实的物理机上运行一样。

总体来说，Docker的接口相当简单，用户可以方便的创建和使用容器，把自己的应用放进容器。容器还可以进行版本管理、复制、分享、修改，就像管理普通代码一样。

## 5、Docker用途

Docker的用途，目前有三大类：

1、提供一次性的环境。比如，本地测试他人的软件、持续集成的时候提供单元测试和构建的环境。

2、提供弹性的云服务。因为Docker容器可以随开随关，很适合动态扩容和缩容。

3、组件微服务架构。通过多个容器，一台机器可以跑多个服务，因此在本机就可以模拟出微服务架构。

## 6、image文件

Docker把应用程序及其依赖，打包在image文件里面。只有通过这个文件，才能生成Docker容器。image文件可以看作是容器的模板。Docker根据image文件生成容器的实例。同一个image文件，可以生成多个同时运行的容器实例。

image是二进制文件。实际开发过程中，一个image文件往往通过继承另一个image文件，加上一些个性化设置而生成。image文件是通用的，一个机器拷贝到另一个机器，照样可以使用。

## 7、容器文件

image文件生成的容器实例，本身也是一个文件，成为容器文件。也就是说，一旦容器生成，就会同时存在两个文件：image文件和容器文件。而且关闭容器并不会删除容器文件，只是容器停止运行而已。

## 8、Dockerfile文件

它是一个文本文件，用来配置image。Docker根据该文件生成二进制的image文件

```python
def hello :
    i = 0
    
```





参考：http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html













































